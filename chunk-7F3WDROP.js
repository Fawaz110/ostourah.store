import{a as H}from"./chunk-4LYP2GZV.js";import{b as L,e as N,g as U,i as D,l as q,m as z}from"./chunk-RWPWEADW.js";import{a as G}from"./chunk-YJRHUVXO.js";import{a as Q}from"./chunk-CO2J5C67.js";import"./chunk-EN27VUQP.js";import"./chunk-UQ6IVA5U.js";import"./chunk-5YQQEXEO.js";import"./chunk-E7LQUBD3.js";import"./chunk-WSAW2S45.js";import"./chunk-ZZ4TVKJ3.js";import{H as A}from"./chunk-F54PHEQN.js";import"./chunk-CB4AZW4Z.js";import"./chunk-NMGI7OHJ.js";import{c as F,d as W}from"./chunk-YRDZDYCR.js";import{$ as B,aa as j}from"./chunk-24Y6DEMT.js";import{$b as k,Ga as p,Gb as v,Gc as _,Ha as c,Hc as h,Lb as d,Ra as T,Rb as R,Vb as r,Wb as a,Xb as g,ca as S,gc as C,hc as s,i as P,pb as o,qb as m,qc as y,rc as w,sc as E,uc as x,va as I,vc as b,wb as V,wc as M,yc as O,zb as u}from"./chunk-YL2HPNIQ.js";function K(i,f){i&1&&g(0,"img",3)}function X(i,f){if(i&1&&(r(0,"div",19),g(1,"app-card-item",20),a()),i&2){let e=f.$implicit;o(),d("product",e)}}function Y(i,f){i&1&&g(0,"i",24)}function Z(i,f){if(i&1&&(r(0,"div",21)(1,"button",22),y(2),_(3,"translate"),v(4,Y,1,0,"i",23),a()()),i&2){let e=s(2);o(2),E(" ",h(3,2,"products.view-more")," "),o(2),d("ngIf",e.load())}}function $(i,f){if(i&1){let e=k();r(0,"div",4)(1,"button",5),C("click",function(){p(e);let t=s();return c(t.toggleSortingMenu())}),r(2,"span"),g(3,"i",6),a(),r(4,"div",7)(5,"ul")(6,"li",8)(7,"input",9),M("ngModelChange",function(t){p(e);let l=s();return b(l.sortingOption,t)||(l.sortingOption=t),c(t)}),C("ngModelChange",function(){p(e);let t=s();return c(t.sortingChanged())}),a(),r(8,"label",10),y(9),_(10,"translate"),a()(),r(11,"li",8)(12,"input",11),M("ngModelChange",function(t){p(e);let l=s();return b(l.sortingOption,t)||(l.sortingOption=t),c(t)}),C("ngModelChange",function(){p(e);let t=s();return c(t.sortingChanged())}),a(),r(13,"label",12),y(14),_(15,"translate"),a()(),r(16,"li",8)(17,"input",13),M("ngModelChange",function(t){p(e);let l=s();return b(l.sortingOption,t)||(l.sortingOption=t),c(t)}),C("ngModelChange",function(){p(e);let t=s();return c(t.sortingChanged())}),a(),r(18,"label",14),y(19),_(20,"translate"),a()()()()()(),r(21,"div",15)(22,"div",16),v(23,X,2,1,"div",17)(24,Z,5,4,"div",18),a()()}if(i&2){let e=s();o(7),x("ngModel",e.sortingOption),d("value",void 0),o(2),w(h(10,11,"products.recent-added")),o(3),x("ngModel",e.sortingOption),d("value","-rateCount"),o(2),w(h(15,13,"products.rate-count")),o(3),x("ngModel",e.sortingOption),d("value","-numberOfSale"),o(2),w(h(20,15,"products.number-of-sale")),o(4),d("ngForOf",e.products),o(),d("ngIf",(e.pagination==null?null:e.pagination.currentPage)!=(e.pagination==null?null:e.pagination.numbersOfPages))}}var me=(()=>{class i{constructor(e,n,t,l,J){this._ElementRef=e,this._Renderer2=n,this._FormBuilder=t,this._ProductService=l,this._ActivatedRoute=J,this.load=u(!1),this.sortingOption=void 0,this.products=[],this.keyword="",this.category=""}ngOnInit(){document.body.scrollTop=0,document.documentElement.scrollTop=0,this.getQueryParams(),this.keyword!=""||this.category!=""?(console.log("keyword: ",encodeURIComponent(this.keyword).replace("%20","+")),console.log("category: ",this.category),this.search(encodeURIComponent(this.keyword))):this.getAll(1)}getQueryParams(){this._ActivatedRoute.queryParams.subscribe(e=>{this.keyword=e.keyword||"",this.category=e.category||""})}search(e,n=void 0){this.load=u(!0),this._ProductService.search(e).pipe(S(t=>{this.load=u(!1),this.products.push(...t.data.products),this.pagination=t.data.pagination})).subscribe(P,t=>console.log(t))}sortingChanged(){this.getAll(1,this.sortingOption)}seeMore(){this.getAll(this.pagination.currentPage+1)}toggleSortingMenu(){let e=this._ElementRef.nativeElement.querySelector("#sorting-options-menu");console.log(!0),e.classList.contains("hidden")?(this._Renderer2.addClass(e,"opacity-0"),this._Renderer2.removeClass(e,"hidden"),setTimeout(()=>{this._Renderer2.removeClass(e,"opacity-0"),this._Renderer2.removeClass(e,"translate-y-4"),this._Renderer2.addClass(e,"translate-y-2")},10)):(this._Renderer2.addClass(e,"opacity-0"),this._Renderer2.removeClass(e,"translate-y-2"),this._Renderer2.addClass(e,"translate-y-4"),setTimeout(()=>{this._Renderer2.removeClass(e,"opacity-0"),this._Renderer2.addClass(e,"hidden")},200))}getAll(e=1,n=void 0){this.load=u(!0),this._ProductService.getAll(n,e).pipe(S(t=>{this.load=u(!1),this.products.push(...t.data.products),this.pagination=t.data.pagination})).subscribe(P,t=>{this.load=u(!1),console.log(t)})}static{this.\u0275fac=function(n){return new(n||i)(m(T),m(V),m(q),m(G),m(A))}}static{this.\u0275cmp=I({type:i,selectors:[["app-products"]],standalone:!0,features:[O],decls:6,vars:5,consts:[[1,"relative"],[3,"title"],[1,"p-2"],["src","not-found.jpg","alt","no data found",1,"w-full","md:w-1/2","mx-auto"],[1,"filteration","mb-2","flex","gap-5","items-center"],[1,"relative","size-10","rounded-full","border","border-main-light","text-main-solid","text-xl",3,"click"],[1,"pi","pi-filter"],["id","sorting-options-menu",1,"rounded-md","bg-white","shadow-md","overflow-hidden","absolute","z-50","top-full","rtl:right-0","ltr:left-0","translate-y-4","hidden","duration-200","w-40","border","border-main-lighter","text-main-light","text-start"],[1,"hover:bg-main-lighter","hover:bg-opacity-50","duration-100"],["type","radio","id","recent",1,"hidden","peer/option",3,"ngModelChange","ngModel","value"],["for","recent",1,"peer-checked/option:text-main-solid","block","p-2","w-full"],["type","radio","id","rate",1,"hidden","peer/option",3,"ngModelChange","ngModel","value"],["for","rate",1,"peer-checked/option:text-main-solid","block","p-2","w-full"],["type","radio","id","sale",1,"hidden","peer/option",3,"ngModelChange","ngModel","value"],["for","sale",1,"peer-checked/option:text-main-solid","block","p-2","w-full"],[1,"flex","items-center","justify-center"],[1,"grid","grid-cols-12","gap-10","md:gap-5","sm:gap-5"],["class","col-span-12 md:col-span-4 lg:col-span-3 wow bounceInUp","data-wow-duration","1s","data-wow-delay","0s",4,"ngFor","ngForOf"],["class","col-span-12 inline-flex items-center justify-center",4,"ngIf"],["data-wow-duration","1s","data-wow-delay","0s",1,"col-span-12","md:col-span-4","lg:col-span-3","wow","bounceInUp"],[3,"product"],[1,"col-span-12","inline-flex","items-center","justify-center"],[1,"btn-main","flex","items-center","justify-center","gap-2"],["class","pi pi-spinner animate-spin",4,"ngIf"],[1,"pi","pi-spinner","animate-spin"]],template:function(n,t){n&1&&(r(0,"section",0),g(1,"app-banner",1),_(2,"translate"),r(3,"div",2),v(4,K,1,0,"img",3)(5,$,25,17),a()()),n&2&&(o(),d("title",h(2,3,"products.title")),o(3),R(t.products.length==0?4:-1),o(),R(t.products.length>0?5:-1))},dependencies:[Q,H,W,F,z,L,D,N,U,B,j]})}}return i})();export{me as ProductsComponent};
