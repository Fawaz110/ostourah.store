import{a as U}from"./chunk-UR3C5F73.js";import{a as z}from"./chunk-AGQV4XW6.js";import{a as K}from"./chunk-3F6E25MF.js";import{b as A,c as x,e as F,f as j,h as N,j as D,k as M,l as G,m as P,n as q}from"./chunk-RWPWEADW.js";import{a as O}from"./chunk-E5CK7IDI.js";import{a as L}from"./chunk-E7LQUBD3.js";import{l as R}from"./chunk-ZZ4TVKJ3.js";import{W as B}from"./chunk-GBURKEHO.js";import"./chunk-SQCQW5LJ.js";import"./chunk-NMGI7OHJ.js";import{c as T,d as E}from"./chunk-YRDZDYCR.js";import{aa as V}from"./chunk-24Y6DEMT.js";import{$b as I,Ga as C,Gb as b,Gc as a,Ha as y,Hc as s,Lb as h,Vb as o,Wb as n,Xb as v,ca as u,gc as g,hc as w,i as p,pb as i,qb as m,qc as r,rc as d,va as S,yc as k,zb as f}from"./chunk-YL2HPNIQ.js";function J(c,Q){if(c&1){let e=I();o(0,"span",19)(1,"span"),r(2),a(3,"translate"),n(),o(4,"a",20),g("click",function(){C(e);let l=w();return y(l.resendCode())}),r(5),a(6,"translate"),n()()}c&2&&(i(2),d(s(3,2,"account.no-code")),i(3),d(s(6,4,"account.resend-code")))}var pe=(()=>{class c{constructor(e,t,l,_,W,H){this._FormBuilder=e,this._AuthService=t,this._Router=l,this._Store=_,this._CookieService=W,this._ToastrService=H,this.hideResend=f(!1),console.log("path: ",l.url)}submit(){this.form.status=="VALID"&&(this._Router.url.includes("verify-phone")?this.varifyPhone():this.varifyResetCode())}varifyPhone(){this._AuthService.verifyPhone(this.form.value).pipe(u(e=>{this._CookieService.set(L.defaultTokenKey,e.data.token),this._Store.dispatch(z({token:e.data.token})),this._Router.navigate(["/home"])})).subscribe(p,e=>console.log(e))}varifyResetCode(){let e={phone:this.form.value.phone,resetCode:this.form.value.activateCode};this._AuthService.verifyCode(e).pipe(u(t=>{this._Router.navigate(["/au/re-password"])})).subscribe(p,t=>console.log(t))}resendCode(){this._AuthService.resendCode(this.form.value.phone).pipe(u(e=>{this._AuthService.activateCode=e.data.code;let t=localStorage.getItem("lang")=="en"?"We sent another code":"\u0623\u0631\u0633\u0644\u0646\u0627 \u0631\u0645\u0632 \u0627\u062E\u0631";this._ToastrService.info(t)})).subscribe(p,e=>console.log(e))}ngOnInit(){this.hideResend=this._Router.url.includes("verify-phone")?f(!0):f(!1),this.form=this._FormBuilder.group({phone:[this._AuthService.phone,[x.required]],activateCode:["",[x.required]]})}static{this.\u0275fac=function(t){return new(t||c)(m(G),m(U),m(B),m(R),m(K),m(O))}}static{this.\u0275cmp=S({type:c,selectors:[["app-verify-code"]],standalone:!0,features:[k],decls:31,vars:20,consts:[[1,"min-h-screen","flex","items-center"],[1,"container","mx-auto"],[1,"inner","flex","justify-center"],["wow-data-duration","1.5s",1,"w-full","lg:w-1/3","rounded-md","lg:border","lg:shadow-md","lg:hover:shadow-main-lighter","lg:hover:border-main-solid","duration-200","p-5","wow","fadeIn"],[1,"heading","mb-5","flex","items-center","gap-2"],["loading","lazy","src","logo.png","alt","logo",1,"w-14"],[1,"content"],[1,"text-3xl","font-extrabold","text-main-solid"],[1,"text-lg","font-thin","text-main-light"],[1,"form"],[3,"ngSubmit","formGroup"],[1,"form-control","mb-3"],["for","code"],["id","code","formControlName","activateCode","type","text",3,"placeholder"],[1,"hint"],[1,"text-main-solid","font-extrabold"],[1,"text-sm","ms-2","text-main-light"],[1,"btn-main","w-full","mt-5","rounded-md"],["class","block text-center",4,"ngIf"],[1,"block","text-center"],[1,"text-main-solid","underline","cursor-pointer","hover:text-main-light","duration-200",3,"click"]],template:function(t,l){t&1&&(o(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),v(5,"img",5),o(6,"div",6)(7,"h2",7),r(8),a(9,"translate"),n(),o(10,"span",8),r(11),a(12,"translate"),n()()(),o(13,"div",9)(14,"form",10),g("ngSubmit",function(){return l.submit()}),o(15,"div",11)(16,"label",12),r(17),a(18,"translate"),n(),v(19,"input",13),a(20,"translate"),n(),o(21,"div",14)(22,"span",15),r(23,"*"),n(),o(24,"span",16),r(25),a(26,"translate"),n()(),o(27,"button",17),r(28),a(29,"translate"),n(),b(30,J,7,6,"span",18),n()()()()()()),t&2&&(i(8),d(s(9,8,"account.activate-code")),i(3),d(s(12,10,"account.activation-reson")),i(3),h("formGroup",l.form),i(3),d(s(18,12,"account.activate-code")),i(2),h("placeholder",s(20,14,"account.activate-code-placeholder")),i(6),d(s(26,16,"account.activate-hint")),i(3),d(s(29,18,"account.confirm")),i(2),h("ngIf",!l.hideResend()))},dependencies:[P,N,A,F,j,q,D,M,E,T,V]})}}return c})();export{pe as VerifyCodeComponent};
