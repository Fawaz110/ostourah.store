import{a as y}from"./chunk-HATCFJ43.js";import{a as h}from"./chunk-NB3MO2E5.js";import{l as d}from"./chunk-L4FLERUP.js";import{a as i}from"./chunk-E7LQUBD3.js";import{a as p}from"./chunk-JPM7ZRFP.js";import{ca as l,i as s,ia as u,oa as g}from"./chunk-K2EQSHJF.js";var H=(()=>{class c{constructor(t,e){this._HttpClient=t,this._Store=e,this.authorization$=this._Store.select(h),this.currency$=this._Store.select(y),this.getTokenAndCurrency=()=>{let r="";this.authorization$.pipe(l(n=>r=n.token)).subscribe(s,n=>console.log(n));let o="";return this.currency$.pipe(l(n=>o=n.currency)).subscribe(s,n=>console.log(n)),{token:r,currency:o}}}getCategories(){let t=localStorage.getItem("lang"),{token:e,currency:r}=this.getTokenAndCurrency();return this._HttpClient.get(i.baseUrl+"category",{headers:{lang:t,Authorization:"Bearer "+e,currency:r}})}getProductsWithCategory(t,e=1){let{token:r,currency:o}=this.getTokenAndCurrency(),n=localStorage.getItem("lang");return this._HttpClient.get(i.baseUrl+`product/filter?category=${t}&page=${e}`,{headers:{currency:o,lang:n}})}getFilterByCategory(t){let e=localStorage.getItem("lang"),{currency:r}=this.getTokenAndCurrency();return this._HttpClient.get(i.baseUrl+`product/filterData/${t}`,{headers:{lang:e,currency:r}})}getWithFilters(t,e,r,o,n,a=1,f=10){return this._HttpClient.get(i.baseUrl+`product/filter?page=${a}&limit=${f}
      ${e!=null?"&price[lt]="+e:""}
      ${t!=null?"&price[gt]="+t:""}
      ${o!=null?"&category="+o:""}
      ${r!=null?"&color="+r:""}
      ${n!=null?"&discount="+n:""}`)}getAll(t=void 0,e=1,r=10){let o=localStorage.getItem("lang"),{token:n,currency:a}=this.getTokenAndCurrency();return this._HttpClient.get(i.baseUrl+`product?page=${e}&limit=${r}
      ${t!=null?"&sort="+t:""}`,{headers:{Authorization:"Bearer "+n,lang:o,currency:a}})}getProductDetails(t){let e=localStorage.getItem("lang"),{token:r,currency:o}=this.getTokenAndCurrency();return this._HttpClient.get(i.baseUrl+`product/${t}`,{headers:{Authorization:"Bearer "+r,lang:e,currency:o}})}static{this.\u0275fac=function(e){return new(e||c)(g(p),g(d))}}static{this.\u0275prov=u({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();export{H as a};
