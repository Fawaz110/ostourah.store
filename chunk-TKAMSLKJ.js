import{d as k}from"./chunk-FXZV2IAN.js";import{a as q}from"./chunk-SLH6HNWR.js";import{a as j}from"./chunk-7K5AXTC3.js";import{b as L,e as E,f as _,h as F,i as T,j as x,k as C,l as I,m as D,n as R}from"./chunk-DYNFDFH4.js";import{l as w}from"./chunk-WQI3MN5H.js";import{b as s}from"./chunk-Z5E3ILZ7.js";import{Ba as b}from"./chunk-X3BFDEXP.js";import{Eb as a,Fb as i,Gb as o,Pa as d,Qb as v,Ta as p,Zb as m,e as P,eb as h,ec as y,fb as l,fc as S,ta as u,zb as f}from"./chunk-3KPRBS5G.js";var n=P(q());var W=(()=>{class g{constructor(e,t,r,c,B,N){this._FormBuilder=e,this.platformId=t,this._TranslateService=r,this._ElementRef=c,this.store=B,this.translate=N}ngOnInit(){localStorage.removeItem("lang"),this.langForm=this._FormBuilder.group({lang:["en"]}),this.translate&&typeof this.translate.setDefaultLang=="function"?(this.translate.setDefaultLang("en"),this.translate.use("en")):console.error("TranslateService not correctly initialized"),typeof window<"u"&&window.localStorage&&b(this.platformId)&&this.changeLanguage(localStorage.getItem("lang")||this.translate.getBrowserCultureLang()||"en")}changeLang(){console.log("lang changed | from lang ",this.langForm.value);let e=this._ElementRef.nativeElement.querySelector("#selected-lang"),t=this._ElementRef.nativeElement.querySelector("#selected-lang-img");switch(this.langForm.get("lang")?.value){case"ar":e.innerText="\u0639\u0631\u0628\u064A",t.src="currencies/egypt-flag.svg";break;default:e.innerText="English",t.src="currencies/usa-flag.svg";break}this.changeLanguage(this.langForm.value.lang)}changeLanguage(e){this.language=e;let t=this._ElementRef.nativeElement.querySelector("#selected-lang");e=="ar"?t.innerText="\u0639\u0631\u0628\u064A":t.innerText="English",this._TranslateService.use(e),localStorage.setItem("lang",e),this.applyLanguage()}applyLanguage(){let e=localStorage.getItem("lang"),r=new URL(window.location.href).searchParams.get("lang")||e||this.getBrowserPreferredLanguage();localStorage.setItem("lang",r),this._TranslateService.setDefaultLang(r),this._TranslateService.use(r),r=="ar"&&((0,n.default)("html").attr("lang","ar"),(0,n.default)("html").attr("dir","rtl"),(0,n.default)("html").removeClass("d-ltr"),(0,n.default)("html").addClass("d-rtl"),this.changeLayoutDirection("rtl")),r=="en"&&((0,n.default)("html").attr("lang","en"),(0,n.default)("html").attr("dir","ltr"),(0,n.default)("html").removeClass("d-rtl"),(0,n.default)("html").addClass("d-ltr"),this.changeLayoutDirection("ltr"))}getBrowserPreferredLanguage(){let e=navigator.language,t=["en","ar"],r=e.substring(0,2);return t.includes(r)?r:"en"}changeLayoutDirection(e){this.store.dispatch(k({dir:e}));let t=this._ElementRef.nativeElement.querySelector("#selected-lang"),r=this._ElementRef.nativeElement.querySelector("#selected-lang-img");switch(e){case"rtl":t.innerText="\u0639\u0631\u0628\u064A",this.langForm.patchValue({lang:"\u0639\u0631\u0628\u064A"}),r.src="currencies/egypt-flag.svg";break;case"ltr":t.innerText="English",this.langForm.patchValue({lang:"English"}),r.src="currencies/usa-flag.svg";break}this.store.select(j).subscribe(c=>{document.documentElement.setAttribute("dir",c)})}static{this.\u0275fac=function(t){return new(t||g)(l(I),l(p),l(s),l(d),l(w),l(s))}}static{this.\u0275cmp=u({type:g,selectors:[["app-languages-dropdown"]],standalone:!0,features:[y([s]),S],decls:24,vars:1,consts:[[1,"relative","p-2","text-gray-600","duration-200","cursor-pointer","lg:overflow-hidden","group/menu","hover:overflow-visible","trnasitio","hover:bg-gray-200","lg:-order-1","lg:hover:bg-transparent","hover:text-main-solid"],[1,"flex","items-center","justify-between","w-full","gap-2"],["loading","lazy","id","selected-lang-img","src","currencies/usa-flag.svg","alt","egypt flag",1,"w-7"],["id","selected-lang"],[1,"duration-200","pi","pi-angle-down","group-hover/menu:rotate-180"],[1,"absolute","w-32","py-2","duration-200","delay-75","translate-y-5","border-t-2","opacity-0","ltr:right-0","rtl:left-0","border-main-solid","group-hover/menu:translate-y-0","group-hover/menu:opacity-100","top-full","bg-gray-50","rounded-b-md"],[3,"change","formGroup"],[1,"duration-200","bg-gray-50","hover:bg-gray-200","hover:font-bold"],["type","radio","id","english","formControlName","lang","value","en",1,"hidden","peer/lang"],["for","english",1,"flex","items-center","w-full","gap-2","p-2","duration-200","cursor-pointer","peer-checked/lang:text-main-solid","peer-checked/lang:font-bold"],["loading","lazy","src","currencies/usa-flag.svg","alt","egypt flag",1,"w-7"],["type","radio","id","arabic","formControlName","lang","value","ar",1,"hidden","peer/lang"],["for","arabic",1,"flex","items-center","w-full","gap-2","p-2","duration-200","cursor-pointer","peer-checked/lang:text-main-solid","peer-checked/lang:font-bold"],["loading","lazy","src","currencies/egypt-flag.svg","alt","egypt flag",1,"w-7"]],template:function(t,r){t&1&&(a(0,"div",0)(1,"a",1)(2,"span"),o(3,"img",2),i(),a(4,"span",3),m(5,"English"),i(),o(6,"i",4),i(),a(7,"div",5)(8,"form",6),v("change",function(){return r.changeLang()}),a(9,"ul")(10,"li",7),o(11,"input",8),a(12,"label",9)(13,"span"),o(14,"img",10),i(),a(15,"span"),m(16,"English"),i()()(),a(17,"li",7),o(18,"input",11),a(19,"label",12)(20,"span"),o(21,"img",13),i(),a(22,"span"),m(23,"\u0639\u0631\u0628\u064A"),i()()()()()()()),t&2&&(h(8),f("formGroup",r.langForm))},dependencies:[D,F,L,T,E,_,R,x,C]})}}return g})();export{W as a};
