import{a as R}from"./chunk-2OG4CDNV.js";import{b as L,e as D,g as N,m as j}from"./chunk-RWPWEADW.js";import{a as U}from"./chunk-EN27VUQP.js";import"./chunk-E7LQUBD3.js";import"./chunk-WSAW2S45.js";import"./chunk-ZZ4TVKJ3.js";import"./chunk-CB4AZW4Z.js";import"./chunk-NMGI7OHJ.js";import{c as O,d as F}from"./chunk-YRDZDYCR.js";import{$ as V,Ba as k,aa as W}from"./chunk-24Y6DEMT.js";import{$b as I,Ga as g,Gb as E,Gc as p,Ha as b,Hc as u,Lb as d,Va as A,Vb as r,Wb as o,Xb as B,ca as M,gc as w,hc as f,i as x,pb as n,qb as S,qc as s,rc as c,uc as h,va as T,vc as v,wc as y,yc as P,zb as C}from"./chunk-YL2HPNIQ.js";function q(i,m){if(i&1){let t=I();r(0,"div",1)(1,"label",2),s(2),p(3,"translate"),o(),r(4,"input",10),y("ngModelChange",function(e){g(t);let _=f();return v(_.dateOfBirth,e)||(_.dateOfBirth=e),b(e)}),o()()}if(i&2){let t=f();n(2),c(u(3,3,"account.dob")),n(2),d("disabled",!t.editEnabled()),h("ngModel",t.dateOfBirth)}}function z(i,m){if(i&1&&(r(0,"div",1)(1,"label",2),s(2),p(3,"translate"),o(),B(4,"input",11),o()),i&2){let t=m.$implicit,a=m.index;n(2),c(u(3,2,"account.address")+" "+(a+1)),n(2),d("value",t==null?null:t.address)}}function G(i,m){if(i&1){let t=I();r(0,"button",12),w("click",function(){g(t);let e=f();return b(e.startEdit())}),s(1),p(2,"translate"),o()}i&2&&(n(),c(u(2,1,"account.edit")))}function H(i,m){if(i&1){let t=I();r(0,"button",12),w("click",function(){g(t);let e=f();return b(e.confirm())}),s(1),p(2,"translate"),o()}i&2&&(n(),c(u(2,1,"account.confirm")))}function J(i,m){if(i&1){let t=I();r(0,"button",13),w("click",function(){g(t);let e=f();return b(e.addAddress())}),s(1),p(2,"translate"),o()}i&2&&(n(),c(u(2,1,"account.add-address")))}function K(i,m){if(i&1){let t=I();r(0,"button",14),w("click",function(){g(t);let e=f();return b(e.cancel())}),s(1),p(2,"translate"),o()}i&2&&(n(),c(u(2,1,"global.cancel")))}var le=(()=>{class i{constructor(t,a,e){this._UserService=t,this._ToastrService=a,this._PLATFORM_ID=e,this.editEnabled=C(!1)}ngOnInit(){k(this._PLATFORM_ID)&&this.getProfile()}getProfile(){this._UserService.getProfile().pipe(M(t=>{this.userInfo=t.data.user,console.log(this.userInfo)})).subscribe(x,t=>{this._ToastrService.error(t.error.message)})}startEdit(){this.editEnabled=C(!0)}cancel(){console.log("userInfo: ",this.userInfo),this.editEnabled=C(!1),this.getProfile()}addAddress(){console.log("start adding new address using google maps integration")}confirm(){if(this.dateOfBirth!=null){let t=this.dateOfBirth.split("-"),a={name:this.userInfo.name,gender:this.userInfo.gender,email:this.userInfo.email,birthday:`${t[2]}-${t[1]}-${t[0]}`};this._UserService.updateProfile(a).pipe(M(e=>{this._ToastrService.success(localStorage.getItem("lang")=="en"?"Profile data updated successfully":"\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0628\u064A\u0627\u0646\u0627\u062A\u0643 \u0628\u0646\u062C\u0627\u062D"),this.editEnabled=C(!1),this.getProfile()})).subscribe(x,e=>console.log(e))}else this._ToastrService.error(localStorage.getItem("lang")=="en"?"Date of birth field is required":"\u062E\u0627\u0646\u0629 \u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0645\u064A\u0644\u0627\u062F \u0645\u0637\u0644\u0648\u0628\u0629"),this._ToastrService.error(localStorage.getItem("lang")=="en"?"Enter old date of birth if you do not want to change it":"\u0623\u062F\u062E\u0644 \u062A\u0627\u0631\u064A\u062E \u0645\u064A\u062F\u0644\u0627\u0643 \u0627\u0644\u0623\u0635\u0644\u064A \u0627\u0630\u0627 \u0643\u0646\u062A \u0644\u0627 \u062A\u0631\u064A\u062F \u062A\u063A\u064A\u064A\u0631\u0647")}static{this.\u0275fac=function(a){return new(a||i)(S(R),S(U),S(A))}}static{this.\u0275cmp=T({type:i,selectors:[["app-account-info"]],standalone:!0,features:[P],decls:28,vars:26,consts:[[1,"px-5","py-2"],[1,"form-control","mb-5"],["for","full-name"],["type","text",3,"ngModelChange","disabled","ngModel"],["class","form-control mb-5",4,"ngIf"],["class","form-control mb-5",4,"ngFor","ngForOf"],[1,"mb-5","flex","items-center","gap-2"],["class","btn-main",3,"click",4,"ngIf"],["class","btn-main-light",3,"click",4,"ngIf"],["class","px-5 py-2 text-main-solid rounded-full font-bold hover:text-white hover:bg-main-solid duration-200",3,"click",4,"ngIf"],["type","date",3,"ngModelChange","disabled","ngModel"],["type","text","disabled","",3,"value"],[1,"btn-main",3,"click"],[1,"btn-main-light",3,"click"],[1,"px-5","py-2","text-main-solid","rounded-full","font-bold","hover:text-white","hover:bg-main-solid","duration-200",3,"click"]],template:function(a,e){a&1&&(r(0,"section",0)(1,"div",1)(2,"label",2),s(3),p(4,"translate"),o(),r(5,"input",3),y("ngModelChange",function(l){return v(e.userInfo.name,l)||(e.userInfo.name=l),l}),o()(),r(6,"div",1)(7,"label",2),s(8),p(9,"translate"),o(),r(10,"input",3),y("ngModelChange",function(l){return v(e.userInfo.email,l)||(e.userInfo.email=l),l}),o()(),r(11,"div",1)(12,"label",2),s(13),p(14,"translate"),o(),r(15,"input",3),y("ngModelChange",function(l){return v(e.userInfo.phone,l)||(e.userInfo.phone=l),l}),o()(),E(16,q,5,5,"div",4),r(17,"div",1)(18,"label",2),s(19),p(20,"translate"),o(),r(21,"input",3),y("ngModelChange",function(l){return v(e.userInfo.gender,l)||(e.userInfo.gender=l),l}),o()(),E(22,z,5,4,"div",5),r(23,"div",6),E(24,G,3,3,"button",7)(25,H,3,3,"button",7)(26,J,3,3,"button",8)(27,K,3,3,"button",9),o()()),a&2&&(n(3),c(u(4,18,"account.fullName")),n(2),d("disabled",!e.editEnabled()),h("ngModel",e.userInfo.name),n(3),c(u(9,20,"account.email")),n(2),d("disabled",!e.editEnabled()),h("ngModel",e.userInfo.email),n(3),c(u(14,22,"account.phone")),n(2),d("disabled",!e.editEnabled()),h("ngModel",e.userInfo.phone),n(),d("ngIf",e.editEnabled()),n(3),c(u(20,24,"account.gender")),n(2),d("disabled",!e.editEnabled()),h("ngModel",e.userInfo.gender),n(),d("ngForOf",e.userInfo.address),n(2),d("ngIf",!e.editEnabled()),n(),d("ngIf",e.editEnabled()),n(),d("ngIf",e.editEnabled()),n(),d("ngIf",e.editEnabled()))},dependencies:[F,O,V,W,j,L,D,N]})}}return i})();export{le as AccountInfoComponent};
